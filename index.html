<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
</head>
<script src="./bundle.js"></script>
<style>
	.vertical-center {
	  min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
	  min-height: 100vh; /* These two lines are counted as one :-)       */

	  display: flex;
	  align-items: center; 
	}
	.jumbotron{
	  height:100%;
	  width:100%;
	}
	#title{
	  font-family:'微軟正黑體';
	}
	.title{
		margin-bottom: 20px;
	}
	.img-thumbnail{
		width:36px;
		height:36px;
	}
	.su_text{
		text-decoration:line-through;
	}
</style>
<body>
	<div class="jumbotron vertical-center">
		<div class="container" style="width: 500px;">
			<h2 id="title" class="text-center text-black font-weight-bold title">待辦清單</h2>
			<div class="row align-items-center">
				<div id="accordion">  
					<div class="row" id="add_item">
						<div class="col">
							<input type="textbox" class="form-control" id="item" name="item" />
						</div>
						<img src="./assets/images/success.png" alt=""  class="img-thumbnail" id="add" name="add" onClick="add_item()"/>
					</div>
					<h3>------------------------------------</h3>
					<div class="card bg-light text-secondary">
						<div class="card-body">
							<div id="item_list">
								<table id="item_table" class="table">
									<tr>
										<th scope="col"></th>
										<th scope="col">項目</th>
										<th scope="col">修改</th>
										<th scope="col">刪除</th>
									</tr>
									<tr id="item0">
											<td scope="row"><input type="checkbox" id="success" name="success" onClick="success_item(this)"/></td>
											<td>7點~8點晨跑</td>
											<td><img src="./assets/images/pencil.png" alt=""  class="img-thumbnail" id="pencil" name="pencil" onClick="update_item(this)"/></td>
											<td><img src="./assets/images/delete.png" alt=""  class="img-thumbnail" id="delete" name="delete" onClick="delete_item(this)"/></td>
										</tr>
										<tr id="item1">
											<td scope="row"><input type="checkbox" id="success" name="success" onClick="success_item(this)"/></td>
											<td>8點~9點準備上班</td>
											<td><img src="./assets/images/pencil.png" alt=""  class="img-thumbnail" id="pencil" name="pencil" onClick="update_item(this)"/></td>
											<td><img src="./assets/images/delete.png" alt=""  class="img-thumbnail" id="delete" name="delete" onClick="delete_item(this)"/></td>
										</tr>
								</table>
							</div>
						</div>
					</div>
					<h3>------------------------------------</h3>
					<div class="card bg-light text-secondary">
						<div class="card-body">
							<h2 id="title" class="text-center text-black font-weight-bold">已完成</h2>
							<div id="success_list">
								<table id="success_table" class="table">
									<tr>
										<th scope="col"></th>
										<th scope="col">項目</th>
										<th scope="col">修改</th>
										<th scope="col">刪除</th>
									</tr>
									<tr id="su_item0">
										<td><input type="checkbox" id="success" name="success" onClick="success_item(this)" checked/></td>
										<td class="su_text">5點~6點準備起床盥洗</td>
										<td><img src="./assets/images/pencil.png" alt=""  class="img-thumbnail" id="pencil" name="pencil" onClick="update_item(this)"/></td>
										<td><img src="./assets/images/delete.png" alt=""  class="img-thumbnail" id="delete" name="delete" onClick="delete_item(this)"/></td>
									</tr>
								</table>
							<div>
						<div>
					<div>
				<div>
			<div>
		<div>
	<div>
</body>
<script language="JavaScript">

function add_item(){
	let item_table = document.getElementById("item_table");
	let item = document.getElementById("item").value;
	let length = item_table.rows.length;
	
	let tr = item_table.insertRow(length);
	tr.setAttribute("id", "item"+(length-1));
	
	//用陣列組欄位內容
	let success_item = document.createElement("input");
	success_item.setAttribute("type", "checkbox");
	success_item.setAttribute("id", "success");
	success_item.setAttribute("name", "success");
	success_item.setAttribute("onClick", "success_item(this)");
	
	let item_text = document.createTextNode(item);
	
	let update_item = document.createElement("img");
	update_item.setAttribute("src", "./assets/images/pencil.png");
	update_item.setAttribute("id", "pencil");
	update_item.setAttribute("name", "pencil");
	update_item.setAttribute("class", "img-thumbnail");
	update_item.setAttribute("onClick", "update_item(this)");
	
	let delete_item = document.createElement("img");
	delete_item.setAttribute("src", "./assets/images/delete.png");
	delete_item.setAttribute("id", "delete");
	delete_item.setAttribute("name", "delete");
	delete_item.setAttribute("class", "img-thumbnail");
	delete_item.setAttribute("onClick", "delete_item(this)");
	
	let colums = [success_item,item_text,update_item,delete_item];
	
	//迴圈跑陣列新增至table裡
	for(var i=0; i<colums.length; i++){
		let td = document.createElement("td");
		if(i==0){
			td.setAttribute("scope", "row");
		}
		td.appendChild(colums[i]);
		tr.appendChild(td);
	}
	
	document.getElementById("item").value = "";
}

function update_item(obj){
	let item_td = obj.closest('tr').cells[1];
	let textbox = item_td.querySelector('input[type=textbox]');
	
	if(textbox==null){
		item_td.innerHTML = '<input type="textbox" id="update" name="update" value="'+item_td.innerText+'"/>';
	}else{
		item_td.innerHTML =  textbox.value;
	}
}

function delete_item(obj){
	let item_table = obj.closest('table');
	let tr_count = obj.closest('tr').id.replace("item","");
	
	item_table.deleteRow(Number(tr_count)+1);
	
}

function success_item(obj){
	let item_table = obj.closest('table');
	let table_id = item_table.id;
	
	if(table_id=="item_table"){
		let success_table = document.getElementById("success_table");
		let tr = obj.closest('tr');
		tr.setAttribute("id", "su_item"+(success_table.rows.length-1));
		
		let su_text = tr.cells[1];
		su_text.setAttribute("class", "su_text");
		success_table.appendChild(tr);
	}else{
		let item_table = document.getElementById("item_table");
		let tr = obj.closest('tr');
		tr.setAttribute("id", "item"+(item_table.rows.length-1));
		item_table.appendChild(tr);
	}
	
	//let now_text = document.getElementById("item_table").rows[count].cells[1].innerHTML;
	//let table_length = document.getElementById("success_table").rows.length;
	
	//let tr = document.getElementById("success_table").insertRow(table_length);
	//tr.setAttribute("id","su_item"+table_length);
	//let td = tr.insertCell(tr.cells.length);
    //td.innerHTML = '<td>'+now_text+'</td>';
	
	//td = tr.insertCell(tr.cells.length);
	//td.innerHTML = '<img src="./assets/images/delete.png" alt=""  class="img-thumbnail" id="delete" name="delete" onClick="delete_SuccessItem('+table_length+')"/>';

	//delete_item(count);
}
</script>
</html>